<h1>Journals</h1>


<div class="well well-small span8">
	<button class="btn" ng-click='new()'>New</button>
</div>

<div spin="spin" ng-show="spin" class="well well-large span8"></div>

<div ng-hide='spin' class="span8 well well-small" ng-repeat="j in journals" ng-controller="JournalFormCtrl">
	<h4>
		<span class="span1">{{j.number}}</span>
		<span class="span2">{{j.date}}</span>
		<span class="span3">{{j.j_type}}</span>
		<span class="span3">
			<button class="btn btn-primary">Edit</button>
			<button class="btn btn-danger">Delete</button>
		</span>
		<button class="btn btn-warning">Post</button>
		<div>
			<button type="button" class="btn btn-link" ng-model="linesShown" button="showLines()" undefined-text="Loading...">Show lines</button>
		</div>
	</h4>
	<table class="table" ng-show="linesShown">
		<tr>
			<th>Date</th>
			<th>Item Code</th>
			<th>Item Name</th>
			<th>Quantity</th>
		</tr>
		<tr ng-repeat="l in j.lines">
			<td>{{l.date}}</td>
			<td>{{l.item_code}}</td>
			<td>{{l.item_name}}</td>
			<td>{{l.qty}}</td>
		</tr>
	</table>
</div>

<div ng-include='"views/journal_modal.html"'></div>